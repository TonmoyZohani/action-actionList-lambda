schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

# ==================== ROOT TYPES ====================
type Query {
  # Actions
  getAction(id: ID!): Action
  getAction_test(id: ID!): Action
  getActionByActionlistID_test(actionlistID: ID!): [Action]
  actionsByActionlistID(
    actionlistID: ID!
    filter: ModelActionFilterInput
    sortDirection: ModelSortDirection
    limit: Int
    nextToken: String
  ): ModelActionConnection
  actionsByKnowledgeBaseID(
    knowledgeBaseID: ID!
    filter: ModelActionFilterInput
    sortDirection: ModelSortDirection
    limit: Int
    nextToken: String
  ): ModelActionConnection
  listActions(
    filter: ModelActionFilterInput
    limit: Int
    nextToken: String
  ): ModelActionConnection
  syncActions(
    filter: ModelActionFilterInput
    lastSync: AWSTimestamp
    limit: Int
    nextToken: String
  ): ModelActionConnection

  # ActionLists
  getActionList(id: ID!): ActionList
  actionListsByActionboardID(
    actionboardID: ID!
    filter: ModelActionListFilterInput
    sortDirection: ModelSortDirection
    limit: Int
    nextToken: String
  ): ModelActionListConnection
  actionListsByKnowledgeBaseID(
    knowledgeBaseID: ID!
    filter: ModelActionListFilterInput
    sortDirection: ModelSortDirection
    limit: Int
    nextToken: String
  ): ModelActionListConnection
  listActionLists(
    filter: ModelActionListFilterInput
    limit: Int
    nextToken: String
  ): ModelActionListConnection
  syncActionLists(
    filter: ModelActionListFilterInput
    lastSync: AWSTimestamp
    limit: Int
    nextToken: String
  ): ModelActionListConnection
}

type Mutation {
  # Actions
  createAction(input: CreateActionInput!): Action
  updateAction(input: UpdateActionInput!): Action
  deleteAction(id: ID!): Action
  deleteAction_test(actionId: ID!): Boolean
  deleteActionsByActionListID(id: ID!): Boolean
  deleteActionsByActionListID_test(id: ID!): Boolean

  # ActionLists
  createActionList(input: CreateActionListInput!): ActionList
  updateActionList(input: UpdateActionListInput!): ActionList
  deleteActionList(id: ID!): ActionList
  deleteActionListWithItems(id: ID!): Boolean

  # Transfer & Assignment
  transferActionListRequest(input: ActionListTransferInput!): SimpleResponse
  acceptTransferActionListRequest(input: ActionListTransferAcceptRejectInput!): SimpleResponse
  rejectTransferActionListRequest(input: ActionListTransferAcceptRejectInput!): SimpleResponse
  assignUserInActionListOrItem(input: AssignUserInActionListOrItemInput!): SimpleResponse
}

type Subscription {
  onCreateAction(filter: ModelSubscriptionActionFilterInput): Action @aws_subscribe(mutations: ["createAction"])
  onUpdateAction(filter: ModelSubscriptionActionFilterInput): Action @aws_subscribe(mutations: ["updateAction"])
  onDeleteAction(filter: ModelSubscriptionActionFilterInput): Action @aws_subscribe(mutations: ["deleteAction"])
  onCreateActionList(filter: ModelSubscriptionActionListFilterInput): ActionList @aws_subscribe(mutations: ["createActionList"])
  onUpdateActionList(filter: ModelSubscriptionActionListFilterInput): ActionList @aws_subscribe(mutations: ["updateActionList"])
  onDeleteActionList(filter: ModelSubscriptionActionListFilterInput): ActionList @aws_subscribe(mutations: ["deleteActionList"])
}

# ==================== MAIN TYPES ====================
type Action @model @aws_api_key @aws_iam {
  id: ID!
  actionlistID: ID!
  knowledgeBaseID: ID
  
  # Core fields
  ActionItem: String
  ActionStatus: Status
  prompt: String
  Type: String
  Owner: String
  Notify: String
  
  # Flags
  Accepted: Boolean
  Delegate: Boolean
  Ignore: Boolean
  Encrypt: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  
  # Dates & Ranking
  Due_date: AWSDateTime
  orderRank: Int
  
  # Content
  Notes: [String]
  FileUrls: [String]
  KBLink: [String]
  tags: [String]
  GuardRails: AWSJSON
  History: AWSJSON
  userLike: Int
  
  # Relations
  Conversations: ModelConversationConnection @connection(keyName: "byAction", fields: ["id"])
  
  # Assignment/Transfer
  assignedUserInfo: ActionListTransferUserInfo
  assignedByUserInfo: ActionListTransferUserInfo
  
  # System fields
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  _version: Int!
  _deleted: Boolean
  _lastChangedAt: AWSTimestamp!
}

type ActionList @model @aws_api_key @aws_iam {
  id: ID!
  actionboardID: ID
  knowledgeBaseID: ID
  
  # Core fields
  action: String
  Context: String
  notes: String
  actionListStatus: Status
  
  # Flags
  Delegate: Boolean
  Ignore: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  
  # Dates & Ranking
  DueDate: AWSDateTime
  orderRank: Int
  
  # Metadata
  Tags: [String]
  savedBy: String
  metadata: ActionListMetaData
  transferInfo: TransferInfo
  
  # Assignment/Transfer
  assignedUserInfo: ActionListTransferUserInfo
  assignedByUserInfo: ActionListTransferUserInfo
  
  # Relations
  actionItems: ModelActionConnection @connection(keyName: "byActionList", fields: ["id"])
  
  # System fields
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  _version: Int!
  _deleted: Boolean
  _lastChangedAt: AWSTimestamp!
}

# ==================== CONVERSATION TYPES ====================
type Conversation @model @aws_api_key @aws_iam {
  id: ID!
  actionID: ID
  actionboardID: ID!
  DateTime: AWSDateTime
  encrypt: Boolean
  
  msg: ModelMessageConnection @connection(keyName: "byConversation", fields: ["id"])
  
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  _version: Int!
  _deleted: Boolean
  _lastChangedAt: AWSTimestamp!
}

type Message @model @aws_api_key @aws_iam {
  id: ID!
  conversationID: ID!
  content: String
  role: String
  timeStamp: AWSDateTime
  
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  _version: Int!
  _deleted: Boolean
  _lastChangedAt: AWSTimestamp!
}

# ==================== CONNECTION TYPES ====================
type ModelActionConnection {
  items: [Action!]!
  nextToken: String
  startedAt: AWSTimestamp
}

type ModelActionListConnection {
  items: [ActionList!]!
  nextToken: String
  startedAt: AWSTimestamp
}

type ModelConversationConnection {
  items: [Conversation!]!
  nextToken: String
  startedAt: AWSTimestamp
}

type ModelMessageConnection {
  items: [Message!]!
  nextToken: String
  startedAt: AWSTimestamp
}

# ==================== SUPPORTING TYPES ====================
type SimpleResponse {
  success: Boolean!
  message: String!
}

type ActionListMetaData {
  mainBoardId: ID
  newBoardId: ID
}

type ActionListTransferUserInfo {
  id: ID!
  name: String
  email: String!
  avatar: String
}

type TransferInfo {
  transferStatus: TransferStatus
  transferRequestByUserInfo: ActionListTransferUserInfo
  transferAcceptByUserInfo: ActionListTransferUserInfo
  transferRejectByUserInfo: ActionListTransferUserInfo
  transferRequestTime: AWSDateTime
  transferAcceptTime: AWSDateTime
  transferRejectTime: AWSDateTime
}

# ==================== ENUMS ====================
enum Status {
  Active
  Done
  In_Progress
  New
  Todo
  AutoActionAiAgent
  ActionAssistAgent
}

enum TransferStatus {
  REQUESTED
  ACCEPTED
  REJECTED
}

enum ActionListOrItemType {
  ACTION_LIST
  ACTION_ITEM
}

enum ModelSortDirection {
  ASC
  DESC
}

enum ModelAttributeTypes {
  binary
  binarySet
  bool
  list
  map
  number
  numberSet
  string
  stringSet
  _null
}

# ==================== INPUT TYPES ====================
input CreateActionInput {
  actionlistID: ID!
  knowledgeBaseID: ID
  ActionItem: String
  ActionStatus: Status
  prompt: String
  Type: String
  Owner: String
  Notify: String
  Accepted: Boolean
  Delegate: Boolean
  Ignore: Boolean
  Encrypt: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  Due_date: AWSDateTime
  orderRank: Int
  Notes: [String]
  FileUrls: [String]
  KBLink: [String]
  tags: [String]
  GuardRails: AWSJSON
  History: AWSJSON
  userLike: Int
  id: ID
  _version: Int
}

input UpdateActionInput {
  id: ID!
  actionlistID: ID
  knowledgeBaseID: ID
  ActionItem: String
  ActionStatus: Status
  prompt: String
  Type: String
  Owner: String
  Notify: String
  Accepted: Boolean
  Delegate: Boolean
  Ignore: Boolean
  Encrypt: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  Due_date: AWSDateTime
  orderRank: Int
  Notes: [String]
  FileUrls: [String]
  KBLink: [String]
  tags: [String]
  GuardRails: AWSJSON
  History: AWSJSON
  userLike: Int
  _version: Int
}

input CreateActionListInput {
  actionboardID: ID
  knowledgeBaseID: ID
  action: String
  Context: String
  notes: String
  actionListStatus: Status
  Delegate: Boolean
  Ignore: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  DueDate: AWSDateTime
  orderRank: Int
  Tags: [String]
  savedBy: String
  id: ID
  _version: Int
}

input UpdateActionListInput {
  id: ID!
  actionboardID: ID
  knowledgeBaseID: ID
  action: String
  Context: String
  notes: String
  actionListStatus: Status
  Delegate: Boolean
  Ignore: Boolean
  isImportant: Boolean
  isUrgent: Boolean
  DueDate: AWSDateTime
  orderRank: Int
  Tags: [String]
  savedBy: String
  _version: Int
}

input ActionListTransferInput {
  actionListId: ID!
  userId: ID!
  newBoardId: ID!
}

input ActionListTransferAcceptRejectInput {
  actionListId: ID!
  userId: ID!
}

input AssignUserInActionListOrItemInput {
  actionListOrItemId: ID!
  assignedUserId: ID!
  assignedByUserId: ID!
  type: ActionListOrItemType!
}

# ==================== FILTER INPUTS ====================
input ModelActionFilterInput {
  id: ModelIDInput
  actionlistID: ModelIDInput
  knowledgeBaseID: ModelIDInput
  ActionItem: ModelStringInput
  ActionStatus: ModelStatusInput
  prompt: ModelStringInput
  Type: ModelStringInput
  Owner: ModelStringInput
  Notify: ModelStringInput
  Accepted: ModelBooleanInput
  Delegate: ModelBooleanInput
  Ignore: ModelBooleanInput
  Encrypt: ModelBooleanInput
  isImportant: ModelBooleanInput
  isUrgent: ModelBooleanInput
  Due_date: ModelStringInput
  orderRank: ModelIntInput
  Notes: ModelStringInput
  FileUrls: ModelStringInput
  KBLink: ModelStringInput
  tags: ModelStringInput
  GuardRails: ModelStringInput
  History: ModelStringInput
  userLike: ModelIntInput
  createdAt: ModelStringInput
  updatedAt: ModelStringInput
  _deleted: ModelBooleanInput
  and: [ModelActionFilterInput]
  or: [ModelActionFilterInput]
  not: ModelActionFilterInput
}

input ModelActionListFilterInput {
  id: ModelIDInput
  actionboardID: ModelIDInput
  knowledgeBaseID: ModelIDInput
  action: ModelStringInput
  Context: ModelStringInput
  notes: ModelStringInput
  actionListStatus: ModelStatusInput
  Delegate: ModelBooleanInput
  Ignore: ModelBooleanInput
  isImportant: ModelBooleanInput
  isUrgent: ModelBooleanInput
  DueDate: ModelStringInput
  orderRank: ModelIntInput
  Tags: ModelStringInput
  savedBy: ModelStringInput
  createdAt: ModelStringInput
  updatedAt: ModelStringInput
  _deleted: ModelBooleanInput
  and: [ModelActionListFilterInput]
  or: [ModelActionListFilterInput]
  not: ModelActionListFilterInput
}

# ==================== SUBSCRIPTION INPUTS ====================
input ModelSubscriptionActionFilterInput {
  id: ModelSubscriptionIDInput
  actionlistID: ModelSubscriptionIDInput
  knowledgeBaseID: ModelSubscriptionIDInput
  ActionItem: ModelSubscriptionStringInput
  ActionStatus: ModelSubscriptionStringInput
  prompt: ModelSubscriptionStringInput
  Type: ModelSubscriptionStringInput
  Owner: ModelSubscriptionStringInput
  Notify: ModelSubscriptionStringInput
  Accepted: ModelSubscriptionBooleanInput
  Delegate: ModelSubscriptionBooleanInput
  Ignore: ModelSubscriptionBooleanInput
  Encrypt: ModelSubscriptionBooleanInput
  isImportant: ModelSubscriptionBooleanInput
  isUrgent: ModelSubscriptionBooleanInput
  Due_date: ModelSubscriptionStringInput
  Notes: ModelSubscriptionStringInput
  FileUrls: ModelSubscriptionStringInput
  KBLink: ModelSubscriptionStringInput
  tags: ModelSubscriptionStringInput
  GuardRails: ModelSubscriptionStringInput
  History: ModelSubscriptionStringInput
  userLike: ModelSubscriptionIntInput
  createdAt: ModelSubscriptionStringInput
  updatedAt: ModelSubscriptionStringInput
  _deleted: ModelBooleanInput
  and: [ModelSubscriptionActionFilterInput]
  or: [ModelSubscriptionActionFilterInput]
}

input ModelSubscriptionActionListFilterInput {
  id: ModelSubscriptionIDInput
  actionboardID: ModelSubscriptionIDInput
  knowledgeBaseID: ModelSubscriptionIDInput
  action: ModelSubscriptionStringInput
  Context: ModelSubscriptionStringInput
  notes: ModelSubscriptionStringInput
  actionListStatus: ModelSubscriptionStringInput
  Delegate: ModelSubscriptionBooleanInput
  Ignore: ModelSubscriptionBooleanInput
  isImportant: ModelSubscriptionBooleanInput
  isUrgent: ModelSubscriptionBooleanInput
  DueDate: ModelSubscriptionStringInput
  Tags: ModelSubscriptionStringInput
  savedBy: ModelSubscriptionStringInput
  createdAt: ModelSubscriptionStringInput
  updatedAt: ModelSubscriptionStringInput
  _deleted: ModelBooleanInput
  and: [ModelSubscriptionActionListFilterInput]
  or: [ModelSubscriptionActionListFilterInput]
}

# ==================== GENERIC FILTER INPUTS ====================
input ModelStringInput {
  ne: String
  eq: String
  le: String
  lt: String
  ge: String
  gt: String
  contains: String
  notContains: String
  between: [String]
  beginsWith: String
  attributeExists: Boolean
  attributeType: ModelAttributeTypes
  size: ModelSizeInput
}

input ModelIDInput {
  ne: ID
  eq: ID
  le: ID
  lt: ID
  ge: ID
  gt: ID
  contains: ID
  notContains: ID
  between: [ID]
  beginsWith: ID
  attributeExists: Boolean
  attributeType: ModelAttributeTypes
  size: ModelSizeInput
}

input ModelIntInput {
  ne: Int
  eq: Int
  le: Int
  lt: Int
  ge: Int
  gt: Int
  between: [Int]
  attributeExists: Boolean
  attributeType: ModelAttributeTypes
}

input ModelBooleanInput {
  ne: Boolean
  eq: Boolean
  attributeExists: Boolean
  attributeType: ModelAttributeTypes
}

input ModelStatusInput {
  eq: Status
  ne: Status
}

input ModelSizeInput {
  ne: Int
  eq: Int
  le: Int
  lt: Int
  ge: Int
  gt: Int
  between: [Int]
}

# ==================== GENERIC SUBSCRIPTION INPUTS ====================
input ModelSubscriptionStringInput {
  ne: String
  eq: String
  le: String
  lt: String
  ge: String
  gt: String
  contains: String
  notContains: String
  between: [String]
  beginsWith: String
  in: [String]
  notIn: [String]
}

input ModelSubscriptionIDInput {
  ne: ID
  eq: ID
  le: ID
  lt: ID
  ge: ID
  gt: ID
  contains: ID
  notContains: ID
  between: [ID]
  beginsWith: ID
  in: [ID]
  notIn: [ID]
}

input ModelSubscriptionIntInput {
  ne: Int
  eq: Int
  le: Int
  lt: Int
  ge: Int
  gt: Int
  between: [Int]
  in: [Int]
  notIn: [Int]
}

input ModelSubscriptionBooleanInput {
  ne: Boolean
  eq: Boolean
}